<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Toonix TV Player</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- HLS.js -->
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

  <style>
    body {
      background: radial-gradient(circle at center, #000011 0%, #0a001a 100%);
      color: white;
      font-family: 'Segoe UI', sans-serif;
      overflow-x: hidden;
    }
    .neon {
      text-shadow: 0 0 5px #fff, 0 0 15px #0ff, 0 0 30px #f0f;
    }
    video {
      width: 100%;
      max-height: 60vh;
      border-radius: 1rem;
      outline: none;
    }
    input {
      color: black;
    }
  </style>
</head>
<body class="text-center p-4">

  <!-- Header -->
  <h1 class="text-3xl md:text-5xl font-bold neon mb-6">ðŸŽ¬ Toonix TV Player</h1>

  <!-- URL Input -->
  <div id="inputBox" class="mb-6">
    <input id="m3u8Link" type="text" placeholder="Enter your M3U8 link..." 
           class="w-11/12 md:w-1/2 p-3 rounded-xl text-black" />
    <button onclick="loadVideo()" 
            class="ml-2 px-4 py-3 bg-purple-600 hover:bg-purple-800 text-white rounded-xl">Load</button>
  </div>

  <!-- Video Player -->
  <div id="playerBox" class="hidden">
    <video id="video" controls autoplay></video>
  </div>

  <!-- Script -->
  <script>
    function loadVideo() {
      const link = document.getElementById("m3u8Link").value.trim();
      const video = document.getElementById("video");
      const playerBox = document.getElementById("playerBox");

      if (!link) {
        alert("Please enter a valid M3U8 link!");
        return;
      }

      if (Hls.isSupported()) {
        const hls = new Hls({
          enableWebVTT: true,
          debug: false,
        });

        hls.loadSource(link);
        hls.attachMedia(video);

        hls.on(Hls.Events.MANIFEST_PARSED, function () {
          playerBox.classList.remove("hidden");
        });

        hls.on(Hls.Events.AUDIO_TRACKS_UPDATED, (event, data) => {
          console.log("Audio tracks:", data.audioTracks);
        });
      } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
        video.src = link;
        playerBox.classList.remove("hidden");
      } else {
        alert("Your browser does not support M3U8 playback.");
      }
    }
  </script>

</body>
</html>
